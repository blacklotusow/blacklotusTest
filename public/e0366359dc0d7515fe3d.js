webpackJsonp([0],{"39f5":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("q2V1"),i=a(o),r=n("iQzg"),u=a(r),l=n("C1hK"),s=a(l),c=n("bw45"),f=a(c),d=n("Q7HV"),p=a(d),h=n("S2jF"),g=a(h),v=n("ljqf"),y=a(v),b=n("TiWD"),m=a(b),w={edit:i.default,help:u.default,new:s.default,publish:f.default,tag:p.default,theme:g.default,upload:y.default,components:m.default};t.default={run:function(e,t,n){var a=e.split(" "),o=a[0],i=a[1],r=a.slice(2);return"jsblog"!==o?n(["You have to start your command with **jsblog**"]):w[i]?void w[i].apply(null,[n,t].concat(r||[])):n(["Sorry, the command **"+i+"** is unknown"])},getTerminalOutput:function(e,t){var n=[];return this.run(e,t,function(e){n=e}),n}}},"3Tsx":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n("EF6w"),l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return i(t,e),r(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.onClick)}},{key:"onClick",value:function(e){location.reload()}},{key:"render",value:function(){return(0,u.h)("div",{className:"App-update"},"Updated, ",(0,u.h)("strong",null,"click")," anywhere")}}]),t}(u.Component);t.default=l},C1hK:function(e,t,n){"use strict";function a(e,t){var n=(0,r.parseDisplayName)(t.user).login;e(["Creating draft..."]),i.default.create(t.user.uid).then(function(t){e(["Draft created, redirecting..."]),location.href="/drafts/"+n+"/"+t})}Object.defineProperty(t,"__esModule",{value:!0});var o=n("XBTw"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),r=n("L/hj");t.default=a},HW6M:function(e,t,n){var a,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a))e.push(n.apply(null,a));else if("object"===o)for(var r in a)i.call(a,r)&&a[r]&&e.push(r)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(a=[],void 0!==(o=function(){return n}.apply(t,a))&&(e.exports=o))}()},Q7HV:function(e,t,n){"use strict";function a(e,t,n){return i.default.current?i.default.current.isPublished?e(["You have already published this article with tag: **"+i.default.current.tag+"**."]):n?(e(["Setting tag..."]),void i.default.setTag(n).then(function(t){e(t?["Tag is set. Current stats:","- Articles count: **"+(t.articleCount+1)+"**","- Read count: **"+t.readCount+"**"]:["Tag is set. You are the first to use this tag."])}).catch(function(){e(["Unable to set this tag, sorry"])})):e([i.default.current.tag?"Current tag is: **"+i.default.current.tag+"**.":"There is not tag set yet"]):e(["You have to create a new article first"])}Object.defineProperty(t,"__esModule",{value:!0});var o=n("XBTw"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);n("L/hj");t.default=a},S2jF:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return n?-1===s.indexOf(n)?e(["You have not given a valid theme"]):(e(["Updating theme..."]),r.default.updateTheme(n).then(function(){return r.default.getToken(!0)}).then(function(t){r.default.writeCookie(t),l.default.clearAll(),e(["Theme updated, reloading app"]),location.reload()})):e(["### Available themes","- default","- codesandbox"])}Object.defineProperty(t,"__esModule",{value:!0});var i=n("lk7V"),r=a(i),u=n("kezx"),l=a(u),s=["default","codesandbox"];t.default=o},Sa8s:function(e,t,n){"use strict";function a(e){return(0,o.h)("a",{href:"/",className:"Logo-wrapper"},(0,o.h)("div",{className:"Logo-js"},"JS"),(0,o.h)("div",{className:"Logo-blog"},"BLOG"))}Object.defineProperty(t,"__esModule",{value:!0});var o=n("EF6w");t.default=a},TiWD:function(e,t,n){"use strict";function a(e){e(["### Components","Wrap components in **marksy** code language",'- <Image src="somefile.png" width="100%" height="auto" align="center" float="none"/>  - *Display image*','- <Twitter text="Some text to tweet" hashtags="foo,bar"/>  - *Display a tweet section, when clicked redirect to tweet page*','- <Youtube url="https://www.youtube.com/watch?v=uhuLxs8-zP4" width="100%" height="315px" align="center" float="none"/>  - *Display a youtube clip*','- <Codesandbox url="https://codesandbox.io/s/15nzVq3Z"/>  - *Display a codebox sandbox*'])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},XBTw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("q6Ae"),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=null;t.default={current:null,uid:null,key:null,load:function(e,t){var n=this;return this.uid=e,this.key=t,o.default.database().ref("drafts/"+e+"/"+t).once("value").then(function(e){return n.current=e.val()})},create:function(e){var t=o.default.database().ref().child("drafts/"+e).push().key;return this.uid=e,this.key=t,this.current={title:"No Title",datetime:Date.now(),content:"# No Title",articleName:"no_title",isPublished:!1},o.default.database().ref("drafts/"+e+"/"+t).set(this.current).then(function(){return t})},update:function(e){clearInterval(i),Object.assign(this.current,e),Object.assign(this.current,{articleName:this.current.isPublished?this.current.articleName:this.current.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s/g,"_")}),i=setInterval(this.save.bind(this),1e4)},save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.update(Object.assign({datetime:Date.now()},t)),clearInterval(i),o.default.database().ref("drafts/"+this.uid+"/"+this.key).update(this.current).then(function(){return e.current})},getTitleFromToc:function(e){for(var t in e)if(1===e[t].level)return e[t].title;return"No Title"},setTag:function(e){return this.current.tag=e,o.default.database().ref("tags/"+e).once("value").then(function(e){return e.val()})},publish:function(){var e=this;return new Promise(function(t,n){var a=o.default.database().ref("tagArticles/"+e.current.tag+"/"+e.key),i=a.on("value",function(n){n.val()&&n.val().datetime===e.current.datetime&&(a.off("value",i),t())});o.default.database().ref("articles/"+e.uid+"/"+e.current.articleName).set(Object.assign(e.current,{key:e.key,isPublished:!0}))}).catch(function(e){})}}},bhJN:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n("EF6w"),s=n("Sa8s"),c=a(s),f=n("urK5"),d=a(f),p=n("lk7V"),h=a(p),g=n("3Tsx"),v=a(g),y=n("s+XV"),b=a(y),m=n("q6Ae"),w=(a(m),function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:e.user,isChangingAuthentication:!1,hasUpdate:e.hasUpdate,forceOpenConsole:!1},n.toggleLogin=n.toggleLogin.bind(n),n}return r(t,e),u(t,[{key:"componentDidMount",value:function(){this.state.user&&h.default.getToken().then(function(e){h.default.writeCookie(e)})}},{key:"componentWillReceiveProps",value:function(e){e.hasUpdate&&!this.props.hasUpdate&&this.setState({hasUpdate:!0})}},{key:"toggleLogin",value:function(){var e=this;this.setState({isChangingAuthentication:!0}),this.state.user?h.default.signOut().then(function(){h.default.clearCache(),h.default.eraseCookie(),e.setState({isChangingAuthentication:!1,user:null})}):h.default.signIn().then(function(t){e.setState({isChangingAuthentication:!1,user:t,forceOpenConsole:!0})})}},{key:"render",value:function(){return(0,l.h)("div",{className:"App-wrapper"},(0,l.h)(c.default,null),(0,l.h)(d.default,{isChangingAuthentication:this.state.isChangingAuthentication||this.props.isAuthRedirected,isLoggedIn:Boolean(this.state.user),toggleLogin:this.toggleLogin}),this.state.hasUpdate?(0,l.h)(v.default,null):null,this.state.user?(0,l.h)(b.default,{user:this.state.user,forceOpen:this.state.forceOpenConsole}):null)}}]),t}(l.Component));t.default=w},bw45:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!r.default.current)return e(["You have to create a new article first"]);if(!r.default.current.tag)return e(["You have to set a tag before you can publish the article."]);var n=(0,s.parseDisplayName)(t.user).login;return e(["Saving draft..."]),r.default.save({isPublished:!0}).then(function(){return e(["Saved. Publishing..."]),r.default.publish()}).then(function(t){e(["Published at [/articles/"+n+"/"+r.default.current.articleName+"](/articles/"+n+"/"+r.default.current.articleName+")"]),l.default.updateUrls(["/","/articles/"+n+"/"+r.default.current.articleName,"/tags/"+r.default.current.tag])})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("XBTw"),r=a(i),u=n("kezx"),l=a(u),s=n("L/hj");t.default=o},iQzg:function(e,t,n){"use strict";function a(e){e(["### Welcome to JSBlog (BETA)","- jsblog new  - *write new article*","- jsblog tag  - *tag article*","- jsblog publish  - *publish article*","- jsblog edit  - *edit article*","- jsblog upload *filename* - *Upload a file to use in article*","- jsblog components - *list possible components*","- jsblog theme - *list possible themes*","- jsblog theme *sometheme* - *activate a new theme*","- jsblog help - *this welcome*"])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},ljqf:function(e,t,n){"use strict";function a(e,t,n){if(!n)return e(["You have to define a filename"]);e(["Please choose file..."]);var a=document.createElement("input");a.type="file",a.style={position:"fixed",left:"-2000px"},a.onchange=function(){var a=this.files[0],o=(0,r.parseDisplayName)(t.user).login+"/"+n,u=i.default.storage().ref(),l=u.child(o),s=l.put(a);e(["Uploading... 0%"]),s.on("state_changed",function(t){var n=parseInt(t.bytesTransferred/t.totalBytes*100);e(["Uploading... "+n+"%"],!0)},function(){e(["Upload failed, sorry!"])},function(){e(['Upload done! You can now use "'+n+'"'])})},document.body.appendChild(a),a.click()}Object.defineProperty(t,"__esModule",{value:!0});var o=n("q6Ae"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),r=n("L/hj");t.default=a},q2V1:function(e,t,n){"use strict";function a(e,t){var n=location.pathname.split("/")[2];if(n!==(0,o.parseDisplayName)(t.user).login)return e(["This is not your article!"]);var a=document.querySelector("article").id;if(!a)return e(["No article to edit on this page."]);e(["Redirecting you to the draft..."]),location.href="/drafts/"+n+"/"+a}Object.defineProperty(t,"__esModule",{value:!0});var o=n("L/hj");t.default=a},"s+XV":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n("EF6w"),l=n("L/hj"),s=n("39f5"),c=function(e){return e&&e.__esModule?e:{default:e}}(s),f=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isClosed:!e.forceOpen,inputValue:"",textareaValue:"undefined"==typeof window?[]:localStorage.getItem("console")?JSON.parse(localStorage.getItem("console")):c.default.getTerminalOutput("jsblog help",n.props)},n.onInputChange=n.onInputChange.bind(n),n.submit=n.submit.bind(n),n.toggleExpand=n.toggleExpand.bind(n),n.toggleExpandByShortcut=n.toggleExpandByShortcut.bind(n),n.identifyMetaKey=n.identifyMetaKey.bind(n),n}return i(t,e),r(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.identifyMetaKey),window.addEventListener("keyup",this.toggleExpandByShortcut)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.identifyMetaKey),window.removeEventListener("keyup",this.toggleExpandByShortcut)}},{key:"componentDidUpdate",value:function(e,t){t.isClosed&&!this.state.isClosed&&(this.textarea.scrollTop="9999999999",this.input.focus())}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"submit",value:function(e){var t=this;e.preventDefault();var n=this.state.inputValue;this.setState({inputValue:""}),c.default.run(n,this.props,function(e,n){n&&t.state.textareaValue.pop(),t.setState({textareaValue:t.state.textareaValue.concat(e)},function(){t.textarea.scrollTop="9999999999"})})}},{key:"identifyMetaKey",value:function(e){this.triggerMetaKey=e.metaKey&&(91===e.keyCode||17===e.keyCode)}},{key:"toggleExpandByShortcut",value:function(){this.triggerMetaKey&&this.toggleExpand()}},{key:"toggleExpand",value:function(){var e=this.state.isClosed;this.setState({isClosed:!e})}},{key:"render",value:function(){var e=this;return(0,u.h)("div",{className:"App-console"+(this.state.isClosed?"":" open"),style:{zIndex:this.state.isCloed?"-1":"999999999"}},(0,u.h)("div",{className:"App-console-bar",onClick:this.toggleExpand},(0,u.h)("div",{className:"App-console-title"},"cmd")),this.state.isClosed?null:(0,u.h)("div",{className:"App-console-wrapper",onClick:function(){return e.input.focus()}},(0,u.h)("div",{ref:function(t){return e.textarea=t},className:"App-console-textarea"},this.state.textareaValue.map(function(e,t){return(0,u.h)("div",{key:t},(0,l.compile)(e).tree)})),(0,u.h)("div",{className:"App-console-cmd-wrapper"},(0,u.h)("input",{className:"App-console-cmd-sudo",value:"$",readOnly:!0}),(0,u.h)("form",{className:"App-console-cmd",onSubmit:this.submit},(0,u.h)("input",{ref:function(t){return e.input=t},autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onChange:this.onInputChange,value:this.state.inputValue,autoComplete:"off"})))))}}]),t}(u.Component);t.default=f},urK5:function(e,t,n){"use strict";function a(e){var t=e.isLoggedIn,n=e.isChangingAuthentication,a=e.toggleLogin;return(0,o.h)("button",{onClick:a,className:(0,r.default)("App-button","Login-button",{"App-button-loading":n})},n?null:t?"Log out":"Log in")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("EF6w"),i=n("HW6M"),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=a}});